(window.webpackJsonp=window.webpackJsonp||[]).push([[8,4,5],{312:function(t,e,r){var content=r(315);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(10).default)("ffe1a6de",content,!0,{sourceMap:!1})},313:function(t,e,r){"use strict";r.r(e);var n={props:{errors:{type:Array,default:function(){return[]}}}},o=(r(314),r(2)),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",{directives:[{name:"show",rawName:"v-show",value:t.errors.length>0,expression:"errors.length > 0"}]},t._l(t.errors,(function(e,n){return r("li",{key:n,staticClass:"error"},[t._v("\n    "+t._s(e)+"\n  ")])})),0)}),[],!1,null,"29dfd42c",null);e.default=component.exports},314:function(t,e,r){"use strict";r(312)},315:function(t,e,r){var n=r(9)(!1);n.push([t.i,".error[data-v-29dfd42c]{text-align:center;margin-bottom:.5rem;color:red}",""]),t.exports=n},316:function(t,e,r){var content=r(319);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(10).default)("2a54fca8",content,!0,{sourceMap:!1})},318:function(t,e,r){"use strict";r(316)},319:function(t,e,r){var n=r(9)(!1);n.push([t.i,".go-back-button[data-v-2893b992]{margin-right:auto;margin-bottom:1rem}.go-back-icon[data-v-2893b992]{margin-right:20px}.create-edit-contact[data-v-2893b992]{background-color:#fff;display:flex;flex-direction:column;width:100%;height:100vh;overflow-y:auto;padding:2rem 1rem}.errors-loaders[data-v-2893b992]{display:flex;justify-content:center;align-items:center;height:100%;width:100%;text-align:center}.header[data-v-2893b992]{text-align:center;color:#1a1c1d;margin-bottom:1rem}form[data-v-2893b992]{display:flex;flex-direction:column;align-items:center}.required-fields[data-v-2893b992]{text-align:center;color:#8083a3;margin-bottom:1rem}.required-fields span[data-v-2893b992]{color:red;font-size:1.2rem}.emails-container[data-v-2893b992],.phones-container[data-v-2893b992]{display:flex;align-items:flex-end;margin-bottom:1rem}.phones-syntax[data-v-2893b992]{text-align:center;color:#8083a3;margin-bottom:1rem}.set-main-phone[data-v-2893b992]{transform:rotate(180deg)}",""]),t.exports=n},323:function(t,e,r){"use strict";r.r(e);r(29),r(40),r(22),r(136);var n=r(54),o=r(313),l={components:{ValidationObserver:n.a,ValidationProvider:n.b,ValidationErrors:o.default},data:function(){return{name:"",role:"",emails:[{id:Math.random(),value:""}],phones:[{id:Math.random(),value:""}],bio:""}},computed:{isMobile:function(){return this.$store.state.isMobile},contact:function(){return this.$store.state.singleContact.data},loading:function(){return this.$store.state.singleContact.loading},error:function(){return this.$store.state.singleContact.error},isEdit:function(){return"contacts-id-edit"===this.$route.name},lastCreatedEditedContactId:function(){return this.$store.state.lastCreatedEditedContactId},formFieldStyles:function(){return{marginBottom:"1rem"}},actionButtonStyles:function(){return{marginLeft:"1rem"}}},watch:{contact:function(){this.getContactData()}},mounted:function(){this.isEdit&&(this.$store.dispatch("getSingleContact",this.$route.params.id),this.contact._id&&this.getContactData())},methods:{getContactData:function(){if(this.isEdit&&!this.error){var t=this.contact,e=t.name,r=t.role,n=t.emails,o=t.phones,l=t.bio;this.name=e,this.role=r,this.emails=n.map((function(t){return{id:Math.random(),value:t}})),this.phones=o.map((function(t){return{id:Math.random(),value:t}})),this.bio=l}},submit:function(t){this.$store.commit("createEditContact",{_id:this.isEdit&&this.$route.params.id,name:this.name,role:this.role,bio:this.bio,emails:this.emails.map((function(t){return t.value})),phones:this.phones.map((function(t){return t.value}))}),this.$router.push("/contacts/".concat(this.lastCreatedEditedContactId))},addEmail:function(){this.emails.push({id:Math.random(),value:""})},removeEmail:function(t){this.emails=this.emails.filter((function(e){return e.id!==t}))},addPhone:function(){this.phones.push({id:Math.random(),value:""})},removePhone:function(t){this.phones=this.phones.filter((function(e){return e.id!==t}))},setMainPhone:function(t){var e=this.phones.find((function(e){return e.id===t}));this.phones=this.phones.filter((function(e){return e.id!==t})),this.phones.unshift(e)}}},c=(r(318),r(2)),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"create-edit-contact"},[t.isEdit?n("div",{staticClass:"errors-loaders"},[t.loading?n("Loader"):t.error?n("h3",[t._v(t._s(t.error))]):t._e()],1):t._e(),t._v(" "),t.error||t.loading?t._e():[t.isMobile?n("Button",{staticClass:"go-back-button",attrs:{hoverable:!1,color:"secondary"},on:{click:function(e){return t.$router.push("/")}}},[t._t("before-content",(function(){return[n("img",{staticClass:"go-back-icon",attrs:{src:r(211),alt:""}})]})),t._v(" "),t._t("default",(function(){return[t._v("Назад")]}))],2):t._e(),t._v(" "),n("h2",{staticClass:"header"},[t._v("\n      "+t._s(t.isEdit?"Обновить контакт":"Создать новый контакт")+"\n    ")]),t._v(" "),n("div",{staticClass:"form-container"},[t._m(0),t._v(" "),n("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(e){var o=e.handleSubmit;return[n("form",{on:{submit:function(e){return e.preventDefault(),o(t.submit)}}},[n("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors;return[n("validation-errors",{attrs:{errors:r}}),t._v(" "),n("Input",{style:t.formFieldStyles,attrs:{value:t.name,required:!0,"i-label":"Имя"},model:{value:t.name,callback:function(e){t.name="string"==typeof e?e.trim():e},expression:"name"}})]}}],null,!0)}),t._v(" "),n("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors;return[n("validation-errors",{attrs:{errors:r}}),t._v(" "),n("Input",{style:t.formFieldStyles,attrs:{value:t.role,required:!0,"i-label":"Должность"},model:{value:t.role,callback:function(e){t.role="string"==typeof e?e.trim():e},expression:"role"}})]}}],null,!0)}),t._v(" "),t._l(t.emails,(function(e){return n("div",{key:e.id,staticClass:"emails-container"},[n("ValidationProvider",{attrs:{rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(r){var o=r.errors;return[n("validation-errors",{attrs:{errors:o}}),t._v(" "),n("Input",{attrs:{value:e.value,required:!0,"i-label":"Email"},model:{value:e.value,callback:function(r){t.$set(e,"value","string"==typeof r?r.trim():r)},expression:"email.value"}})]}}],null,!0)}),t._v(" "),t.emails.length>1?n("Button",{style:t.actionButtonStyles,attrs:{type:"button",hoverable:!1,color:"secondary"},on:{click:function(r){return t.removeEmail(e.id)}}},[n("img",{attrs:{src:r(212),alt:""}})]):t._e()],1)})),t._v(" "),n("Button",{style:t.formFieldStyles,attrs:{type:"button",hoverable:!1,color:"secondary"},on:{click:t.addEmail}},[t._v("\n            Добавить Email\n          ")]),t._v(" "),n("div",{staticClass:"phones-syntax"},[t._v("\n            Номера телефонов должны начинаться с +7 или 8\n          ")]),t._v(" "),t._l(t.phones,(function(e,o){return n("div",{key:e.id,staticClass:"phones-container"},[n("ValidationProvider",{attrs:{rules:"phone|required"},scopedSlots:t._u([{key:"default",fn:function(r){var o=r.errors;return[n("validation-errors",{attrs:{errors:o}}),t._v(" "),n("Input",{attrs:{value:e.value,type:"tel",required:!0,"i-label":"Tелефон"},model:{value:e.value,callback:function(r){t.$set(e,"value","string"==typeof r?r.trim():r)},expression:"phone.value"}})]}}],null,!0)}),t._v(" "),0!==o?n("Button",{style:t.actionButtonStyles,attrs:{"with-tooltip":!0,tooltip:"Сделать основным номером телефона",type:"button",hoverable:!1,color:"secondary"},on:{click:function(r){return t.setMainPhone(e.id)}}},[n("img",{staticClass:"set-main-phone",attrs:{src:r(211),alt:""}})]):t._e(),t._v(" "),t.phones.length>1?n("Button",{style:t.actionButtonStyles,attrs:{type:"button",hoverable:!1,color:"secondary"},on:{click:function(r){return t.removePhone(e.id)}}},[n("img",{staticClass:"main-phone-icon",attrs:{src:r(212),alt:""}})]):t._e()],1)})),t._v(" "),n("Button",{style:t.formFieldStyles,attrs:{type:"button",hoverable:!1,color:"secondary"},on:{click:t.addPhone}},[t._v("\n            Добавить Телефон\n          ")]),t._v(" "),n("Input",{style:t.formFieldStyles,attrs:{value:t.bio,"i-type":"textarea","i-label":"Био"},model:{value:t.bio,callback:function(e){t.bio="string"==typeof e?e.trim():e},expression:"bio"}}),t._v(" "),n("Button",[t._v(t._s(t.isEdit?"Обновить":"Создать"))])],2)]}}],null,!1,1455942415)})],1)]],2)}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"required-fields"},[t._v("\n        Поля со "),r("span",[t._v("*")]),t._v(" обязательны для заполнения\n      ")])}],!1,null,"2893b992",null);e.default=component.exports;installComponents(component,{Loader:r(213).default,Button:r(56).default,ValidationErrors:r(313).default,Input:r(98).default})},334:function(t,e,r){"use strict";r.r(e);var n={components:{CreateEditContact:r(323).default},layout:function(t){return t.isMobile?"mobile":"default"}},o=r(2),component=Object(o.a)(n,(function(){var t=this.$createElement;return(this._self._c||t)("create-edit-contact")}),[],!1,null,null,null);e.default=component.exports}}]);